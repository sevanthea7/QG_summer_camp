### 1.基本语句

~~~python
import request
response = requests.get( 'http://books.toscrape.com/' )

response.status_code
~~~

返回状态码是200的话成功，是404的话资源不存在

更简单的状态获取方法：

~~~python
if response.ok:
	# 相应内容 eg response.text
else:
	print( 'Failed' )
~~~

head

伪装成正常浏览器，防止请求被拒绝

eg.

~~~
head = { 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; win64; X64)' }
~~~

冒号后的信息：网页右键 -> 检查 -> Network -> Headers ->  user-agent 内容

### 2.常见标签

- 标题标签

  ~~~html
  <h1>一级标题</h1>
  <h2>二级标题</h2>
  ...
  <h6>六级标题</h6>
  ~~~

- 文本

  ~~~html
  <p>文本内容</p>
  <p>第三和<br>第四个字之间强制换行</p>
  <p>加粗第<b>四</b>个字</p>
  <p>斜体第<i>四</i>个字</p>
  <p>下划线第<u>五</u>个字</p>
  ~~~

  除了`<br>`都要包围文字才能达到效果

- 图片

  不包围，设置图像高度宽度的部分可有可无

  ~~~html
  <img src = 'https://images......' width = '500px' height = '500px'>
  ~~~

- 链接

  ~~~html
  <a href = 'https://.......'target='_self'>我的主页</a>
  ~~~

  target默认为_self，为在当前页面跳转到网页

  也可以设成_blank，在新窗口里打开
  
- 容器

  ~~~html
  <div>
      <a href = 'https://.....'>div下的链接1</a>
      <a href = 'https://.....'>div下的链接2</a>
  </div>
  
  <span>
      <a href = 'https://.....'>div下的链接1</a>
      <a href = 'https://.....'>div下的链接2</a>
  </span>
  ~~~

  方便给容器内的元素统一更换背景

  如：

  ~~~html
  <div style = 'background-color: red;'>
      <a href = 'https://.....'>div下的链接1</a>
      <a href = 'https://.....'>div下的链接2</a>
  </div>
  
  <span style = 'background-color: red;'>
      <a href = 'https://.....'>div下的链接1</a>
      <a href = 'https://.....'>div下的链接2</a>
  </span>
  ~~~

  div一次占一行，span可以有间隔  有色部分 -> 这是==红色==的==标签==

  ~~~html
  <a href = 'https://baidu.com' >
      这是<span style = "background-color: red;">红色</span>的<span style = "background-color: red;">标签</span>
  </a>
  ~~~

- 有序列表 ordered list, list item -> ol, li

  ~~~html
  <ol>
  	<li>语文</li>
      <li>数学</li>
      <li>英语</li>
  </ol>
  ~~~

  1. 语文
  2. 数学
  3. 英语

- 无序列表 unordered list

  ~~~html
  <ul>
  	<li>语文</li>
      <li>数学</li>
      <li>英语</li>
  </ul>
  ~~~

  - 语文
  - 数学
  - 英语

- 表格  table head, table body, table row, table data

  ~~~html
  <table border = "1">
      <thead>
      	<tr>
          	<td>表头1</td>
              <td>表头2</td>
          </tr>
      </thead>
      <tbody>
      	<tr>
          	<td>a</td>
              <td>b</td>
          </tr>
          <tr>
          	<td>c</td>
              <td>d</td>
          </tr>
      </tbody>
  </table>
  ~~~

  border -> 边框

- class属性 -> 分类

  ~~~html
  <p class = "content">abc</p>
  <p class = "good">review</p>
  ~~~

  

### 3.解析网络内容

beautiful soup

#### （1）解析html -> html.parser

~~~python
soup = BeautifulSoup( content, "html.parser" )
~~~

- `soup.p` -> 打印链接中的第一个文本标签
- `soup.img` -> 打印链接中的第一个图片

#### （2）findAll -> 根据标签或属性找到相应的信息

~~~python
all_prices = soup.findAll( "p", attrs = { "class":"price_color" } )
~~~

attrs -> 键值对里写想找的属性和它的值

在网页中可以看到商品价格都为class: price_color分类的信息 -> attrs

#### （3）找没有明显特征的元素

如书名，全部都是链接，没有明显的区分捷径

-> 特征：1是h3标题，2是a元素

-> 方法：1找所有h3标题，2找所有h3标题下的a元素，3提取a元素中的信息

~~~python
for title in all_title:
	all_links = title.findAll( "a" )
	for link in all_links:
		print( link.string )
~~~

所有h3中只有一个a元素时就不需要第二个for循环了，用`.find()`

~~~python
for title in all_title:
	all_links = title.find( "a" )
	print( all_links.string )
~~~

### 4.查询参数

eg. start=25指从索引二十五开始查询，可设置不断增加的变量更新查询的内容

~~~python
'https://movie.douban.com/top250？start=25'
~~~

